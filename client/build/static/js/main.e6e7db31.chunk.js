(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){},36:function(e,t,a){e.exports=a(75)},41:function(e,t,a){},72:function(e,t){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(34),o=a.n(r),i=(a(41),a(1)),s=a(10),l=a(9),u=a(5),m=(a(18),function(e){var t=e.socket,a=e.user,n=c.a.useState({text:"",who:a}),r=Object(i.a)(n,2),o=r[0],m=r[1];console.log(a);var f=c.a.useState([]),d=Object(i.a)(f,2),v=d[0],h=d[1],E=c.a.useState(""),p=Object(i.a)(E,2),g=p[0],y=p[1];return c.a.useEffect((function(){o.text?t.emit("typing",{who:a.id}):t.emit("typing",{who:""})}),[o.text,a.id,t]),c.a.useEffect((function(){t.on("typing-res",(function(e){y(e.user)})),t.on("message-res",(function(e){h((function(t){return[].concat(Object(s.a)(t),[e])}))})),t.on("join-message",(function(e){var t=e.text,n=e.who;n.id!==a.id&&h((function(e){return[].concat(Object(s.a)(e),[{text:t,who:n}])}))})),t.on("disconnect-message",(function(e){var t=e.text,n=e.who;n.id!==a.id&&h((function(e){return[].concat(Object(s.a)(e),[{text:t,who:n}])}))}))}),[t,a,a.id]),c.a.createElement("div",{className:"box"},c.a.createElement("div",{className:"topBar"},"Hello, ".concat(a.name)),c.a.createElement("div",{className:"msg-box"},c.a.createElement("div",{className:"list"},v.map((function(e,t){return c.a.createElement("div",{style:{display:"flex"},key:t},e.who.id===a.id?c.a.createElement("div",{className:"right-msg"},c.a.createElement("div",{className:"me"},e.who.name),c.a.createElement("div",{className:"text"},e.text)):c.a.createElement("div",{className:"left-msg"},c.a.createElement("div",{className:"text"},e.text),c.a.createElement("div",{className:"me"},e.who.name)))})),g&&g!==a.id&&c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("div",{className:"typing"},"typing...")))),c.a.createElement("div",{className:"input-box"},c.a.createElement("input",{type:"text",name:"text",value:o.text,onChange:function(e){var t=e.target,a=t.name,n=t.value;m((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(l.a)({},a,n))}))},onKeyPress:function(e){if(("Enter"!==e.key||!e.shiftKey)&&"Enter"===e.key){if(e.preventDefault(),!o.text.trim())return;t.emit("send-message",o),m((function(e){return Object(u.a)(Object(u.a)({},e),{},{text:""})}))}}})))}),f=a(35),d=a.n(f)()("https://chat-with-react-socket-care.herokuapp.com/"),v=function(){var e=c.a.useState(""),t=Object(i.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),o=Object(i.a)(r,2),s=o[0],l=o[1],u=c.a.useState(null),f=Object(i.a)(u,2),v=f[0],h=f[1],E=c.a.useState(null),p=Object(i.a)(E,2),g=p[0],y=p[1],b=c.a.useState(!1),x=Object(i.a)(b,2),w=x[0],j=x[1],O=function(){a.trim()&&(j(!0),d.emit("request-join",a),n(""))};return c.a.useEffect((function(){return d.on("response-join",(function(e){var t=e.success,a=e.your_user;y(t),!0===t&&l(a),j(!1)})),d.on("get-users",(function(e){h(e)})),function(){}}),[]),c.a.createElement("div",{style:{display:"grid",placeItems:"center",height:"100vh",overflow:"hidden"}},w?c.a.createElement("div",{style:{color:"#fff",fontWeight:600,fontSize:18}},"Loading..."):s?c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"userBox"},c.a.createElement("ul",null,v.map((function(e){return c.a.createElement("li",{key:e.id},e.name)}))))," ",c.a.createElement(m,{socket:d,user:s})):c.a.createElement("div",null,c.a.createElement("p",{style:{color:"#fff"}},"Enter your name"),c.a.createElement("input",{type:"text",value:a,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.shiftKey||"Enter"===e.key&&(e.preventDefault(),O())},style:{height:40,padding:5,borderRadius:3,fontWeight:600}}),!1===g&&c.a.createElement("p",{style:{color:"red",padding:0,margin:"auto"}},"The name is already taken!"),c.a.createElement("button",{onClick:O,className:"btn"},"JOIN")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(v,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.e6e7db31.chunk.js.map